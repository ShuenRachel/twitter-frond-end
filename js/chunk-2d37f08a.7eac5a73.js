(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d37f08a"],{"100e":function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"form-panel"},[t("div",{staticClass:"form-wrapper"},[t("div",{staticClass:"input-gp"},[t("label",{staticClass:"input-label"},[e._v("帳號")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerData.account,expression:"registerData.account"}],staticClass:"input-field",attrs:{type:"text",required:""},domProps:{value:e.registerData.account},on:{click:function(s){e.errorMessage="",e.submitStatus=""},input:function(s){s.target.composing||e.$set(e.registerData,"account",s.target.value)}}}),t("div",{staticClass:"input-line line",class:{error:"account"===e.errorMessage||"Account already existed!"===e.submitStatus||"Account already existed."===e.submitStatus}}),t("span",{directives:[{name:"show",rawName:"v-show",value:"account"===e.errorMessage,expression:"errorMessage === 'account'"}],staticClass:"input-warning"},[e._v("不可有空欄位")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"Account already existed!"===e.submitStatus||"Account already existed."===e.submitStatus,expression:"\n          submitStatus === 'Account already existed!' ||\n          submitStatus === 'Account already existed.'\n        "}],staticClass:"input-warning"},[e._v("帳號已註冊")])]),t("div",{staticClass:"input-gp"},[t("label",{staticClass:"input-label"},[e._v("名稱")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerData.name,expression:"registerData.name"}],staticClass:"input-field",attrs:{type:"text",required:""},domProps:{value:e.registerData.name},on:{click:function(s){e.errorMessage=""},input:function(s){s.target.composing||e.$set(e.registerData,"name",s.target.value)}}}),t("div",{staticClass:"input-line line",class:{error:"name"===e.errorMessage||"nameTooLong"===e.errorMessage||e.registerData.name.length>50}}),t("span",{directives:[{name:"show",rawName:"v-show",value:"name"===e.errorMessage,expression:"errorMessage === 'name'"}],staticClass:"input-warning"},[e._v("不可有空欄位")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registerData.name.length>50,expression:"registerData.name.length > 50"}],staticClass:"input-warning"},[e._v("名字上限五十字")])]),t("div",{staticClass:"input-gp"},[t("label",{staticClass:"input-label"},[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerData.email,expression:"registerData.email"}],staticClass:"input-field",attrs:{type:"email",required:""},domProps:{value:e.registerData.email},on:{click:function(s){e.errorMessage="",e.submitStatus=""},input:function(s){s.target.composing||e.$set(e.registerData,"email",s.target.value)}}}),t("div",{staticClass:"input-line line",class:{error:"email"===e.errorMessage||"Email already existed!"===e.submitStatus}}),t("span",{directives:[{name:"show",rawName:"v-show",value:"email"===e.errorMessage,expression:"errorMessage === 'email'"}],staticClass:"input-warning"},[e._v("不可有空欄位")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"Email already existed!"===e.submitStatus,expression:"submitStatus === 'Email already existed!'"}],staticClass:"input-warning"},[e._v("電郵已註冊")])]),t("div",{staticClass:"input-gp"},[t("label",{staticClass:"input-label"},[e._v("密碼")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerData.password,expression:"registerData.password"}],staticClass:"input-field",attrs:{type:"password",required:""},domProps:{value:e.registerData.password},on:{click:function(s){e.errorMessage=""},input:function(s){s.target.composing||e.$set(e.registerData,"password",s.target.value)}}}),t("div",{staticClass:"input-line line",class:{error:"password"===e.errorMessage||"incorrectPassword"===e.errorMessage}}),t("span",{directives:[{name:"show",rawName:"v-show",value:"password"===e.errorMessage,expression:"errorMessage === 'password'"}],staticClass:"input-warning"},[e._v("不可有空欄位")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"incorrectPassword"===e.errorMessage,expression:"errorMessage === 'incorrectPassword'"}],staticClass:"input-warning"},[e._v("請確保兩次密碼輸入正確")])]),t("div",{staticClass:"input-gp"},[t("label",{staticClass:"input-label"},[e._v("密碼確認")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerData.checkPassword,expression:"registerData.checkPassword"}],staticClass:"input-field",attrs:{type:"password",required:""},domProps:{value:e.registerData.checkPassword},on:{click:function(s){e.errorMessage=""},input:function(s){s.target.composing||e.$set(e.registerData,"checkPassword",s.target.value)}}}),t("div",{staticClass:"input-line line",class:{error:"checkPassword"===e.errorMessage||"incorrectPassword"===e.errorMessage}}),t("span",{directives:[{name:"show",rawName:"v-show",value:"checkPassword"===e.errorMessage,expression:"errorMessage === 'checkPassword'"}],staticClass:"input-warning"},[e._v("不可有空欄位")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"incorrectPassword"===e.errorMessage,expression:"errorMessage === 'incorrectPassword'"}],staticClass:"input-warning"},[e._v("請確保兩次密碼輸入正確")])])]),"user-regist"===e.currentPathName?t("div",{staticClass:"form-footer"},[t("button",{staticClass:"btn btn-orange btn-full",attrs:{disabled:e.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e._v(" 註冊 ")]),t("div",{staticClass:"link-group"},[t("router-link",{staticClass:"link",attrs:{to:"/user/login"}},[e._v("取消")])],1)]):"user-setting"===e.currentPathName?t("div",{staticClass:"form-footer d-flex justify-content-end"},[t("button",{staticClass:"btn btn-orange btn-small",attrs:{disabled:e.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[e._v(" 儲存 ")])]):e._e()])},r=[],i=t("5530"),n=(t("498a"),t("b0c0"),t("2f62")),o=t("ac0d"),c={mixins:[o["a"]],props:{initIsProcessing:{type:Boolean,required:!0},initSubmitStatus:{type:String,required:!0},initUserData:{type:Object}},data:function(){return{registerData:{account:"",password:"",checkPassword:"",name:"",email:""},isProcessing:!1,submitStatus:"",errorMessage:"pending"}},computed:Object(i["a"])({},Object(n["b"])(["currentPathName"])),watch:{initIsProcessing:function(e){this.isProcessing=e},initSubmitStatus:function(e){this.submitStatus=e,console.log("setting form:",e)}},methods:{handleSubmit:function(){return this.registerData.account.trim()?this.registerData.name.trim()?this.registerData.email.trim()?this.registerData.password.trim()?this.registerData.checkPassword.trim()?this.registerData.password!==this.registerData.checkPassword?(this.errorMessage="incorrectPassword",this.password="",void(this.checkPassword="")):void this.$emit("after-form-submit",this.registerData):this.errorMessage="checkPassword":this.errorMessage="password":this.errorMessage="email":this.errorMessage="name":this.errorMessage="account"},fetehCurrentUser:function(){this.registerData.account=this.initUserData.account,this.registerData.name=this.initUserData.name,this.registerData.email=this.initUserData.email}},created:function(){this.initUserData&&this.fetehCurrentUser()}},u=c,l=(t("ffe7"),t("2877")),m=Object(l["a"])(u,a,r,!1,null,"53ac261c",null);s["a"]=m.exports},1362:function(e,s,t){},"5c7c":function(e,s,t){"use strict";t("1362")},ce33:function(e,s,t){},ce99:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"setting-panel"},[t("SettingForm",{attrs:{"init-is-processing":e.isProcessing,"init-submit-status":e.submitStatus,"init-user-data":e.currentUser},on:{"after-form-submit":e.afterFormSubmit}})],1)},r=[],i=t("1da1"),n=t("5530"),o=(t("96cf"),t("d9e2"),t("100e")),c=t("4cce"),u=t("2f62"),l=t("ac0d"),m={mixins:[l["a"]],components:{SettingForm:o["a"]},data:function(){return{isProcessing:!1,submitStatus:"waiting"}},computed:Object(n["a"])({},Object(u["b"])(["currentUser"])),methods:{afterFormSubmit:function(e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,s.isProcessing=!0,t.next=4,c["a"].updateSetting(s.currentUser.id,e);case 4:if(a=t.sent,r=a.data,"success"===r.status){t.next=8;break}throw new Error(r.message);case 8:s.submitStatus="success",s.ToastSuccess({title:"成功更新設定！"}),s.$router.push("/user/home"),t.next=19;break;case 13:if(t.prev=13,t.t0=t["catch"](0),s.isProcessing=!1,"Email already existed!"!==t.t0.message&&"Account already existed!"!==t.t0.message){t.next=18;break}return t.abrupt("return",s.submitStatus=t.t0.message);case 18:s.ToastError({title:"無法更新設定，請稍後再試"});case 19:case"end":return t.stop()}}),t,null,[[0,13]])})))()}}},d=m,p=(t("5c7c"),t("2877")),g=Object(p["a"])(d,a,r,!1,null,"56656f50",null);s["default"]=g.exports},ffe7:function(e,s,t){"use strict";t("ce33")}}]);
//# sourceMappingURL=chunk-2d37f08a.7eac5a73.js.map