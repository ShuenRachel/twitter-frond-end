{"version":3,"sources":["webpack:///./src/views/UserAllTweets.vue?3c0e","webpack:///src/views/UserAllTweets.vue","webpack:///./src/views/UserAllTweets.vue?d894","webpack:///./src/views/UserAllTweets.vue","webpack:///./src/components/TweetsList.vue?91d1","webpack:///src/components/TweetsList.vue","webpack:///./src/components/TweetsList.vue?33be","webpack:///./src/components/TweetsList.vue","webpack:///./src/views/UserAllTweets.vue?2f80","webpack:///./src/components/TweetsList.vue?3fe7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","tweet","key","id","attrs","on","showReplyModal","_v","_e","replyTweet","afterCloseModal","staticRenderFns","mixins","components","TweetsList","TweetModal","created","fetchTweets","Number","userId","data","tweetsData","modalVisibility","isEmptyData","methods","usersAPI","response","TweetId","tweetUserId","avatar","description","createdAt","tweetUserName","tweetUserAccount","repliedCount","likeCount","liked","title","fetchTweet","tweetId","tweetsAPI","beforeRouteUpdate","to","from","next","params","user_id","computed","mapState","watch","currentUser","component","class","pointer","isAdmin","style","backgroundImage","$event","stopPropagation","preventDefault","toUserProfilePage","_s","_f","toTweetPage","handleReplyClicked","deleteLike","addLike","handleDeleteClicked","props","initTweetData","type","require","isUserPage","isLike","$emit","result","alert","$router","push","name","tweet_id"],"mappings":"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","file":"js/chunk-17158dee.e0bd7b46.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-all-tweets\"},[_c('div',{staticClass:\"tweets-wrapper\"},[_vm._l((_vm.tweetsData),function(tweet){return _c('TweetsList',{key:tweet.id,attrs:{\"init-tweet-data\":tweet},on:{\"after-reply-clicked\":_vm.showReplyModal}})}),(_vm.isEmptyData)?_c('div',{staticClass:\"empty-data\"},[_vm._v(\"目前尚無推文\")]):_vm._e()],2),(_vm.modalVisibility)?_c('TweetModal',{attrs:{\"init-reply-tweet\":_vm.replyTweet},on:{\"after-close-modal\":_vm.afterCloseModal}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-all-tweets\">\n    <div class=\"tweets-wrapper\">\n      <TweetsList\n        v-for=\"tweet in tweetsData\"\n        :key=\"tweet.id\"\n        :init-tweet-data=\"tweet\"\n        @after-reply-clicked=\"showReplyModal\"\n      />\n      <div class=\"empty-data\" v-if=\"isEmptyData\">目前尚無推文</div>\n    </div>\n    <TweetModal\n      :init-reply-tweet=\"replyTweet\"\n      v-if=\"modalVisibility\"\n      @after-close-modal=\"afterCloseModal\"\n    />\n  </div>\n</template>\n\n<script>\nimport TweetsList from \"../components/TweetsList.vue\";\nimport TweetModal from \"@/components/TweetModal.vue\";\nimport usersAPI from \"../apis/users\";\nimport tweetsAPI from \"./../apis/tweets\";\nimport { mapState } from \"vuex\";\nimport { Toastification } from \"./../utils/mixin\";\n\nexport default {\n  mixins: [Toastification],\n  components: {\n    TweetsList,\n    TweetModal,\n  },\n  created() {\n    this.fetchTweets(Number(this.userId));\n  },\n  data() {\n    return {\n      userId: this.$route.params.user_id,\n      tweetsData: [],\n      modalVisibility: false,\n      replyTweet: {},\n      isEmptyData: false,\n    };\n  },\n  methods: {\n    async fetchTweets(userId) {\n      try {\n        const response = await usersAPI.getUserTweets(userId);\n        // TODO: check if repeated throw err here\n        if (response.statusText !== \"OK\") {\n          throw new Error(\"status: \" + response.status);\n        } else if (response.data.status === \"error\") {\n          throw new Error(\"status: \" + response.data.message);\n        }\n        this.tweetsData = response.data.map((tweet) => {\n          return {\n            TweetId: tweet.TweetId,\n            tweetUserId: tweet.tweetUserId,\n            avatar: tweet.avatar,\n            description: tweet.description,\n            createdAt: tweet.createdAt,\n            tweetUserName: tweet.tweetUserName,\n            tweetUserAccount: tweet.tweetUserAccount,\n            repliedCount: tweet.repliedCount,\n            likeCount: tweet.likeCount,\n            liked: tweet.liked,\n          };\n        });\n        this.isEmptyData = !this.tweetsData.length;\n      } catch (error) {\n        this.ToastError({\n          title: \"無法取得用戶推文清單，請稍後再試\",\n        });\n      }\n    },\n    async fetchTweet(tweetId) {\n      try {\n        const response = await tweetsAPI.getTweet(tweetId);\n\n        this.replyTweet = response.data;\n      } catch (error) {\n        this.ToastError({\n          title: \"無法取得推文資料，請稍後再試\",\n        });\n      }\n    },\n    showReplyModal(tweetId) {\n      this.fetchTweet(tweetId);\n      this.modalVisibility = true;\n    },\n    afterCloseModal() {\n      this.modalVisibility = false;\n    },\n  },\n  beforeRouteUpdate(to, from, next) {\n    this.userId = to.params.user_id;\n    this.fetchTweets(Number(this.userId));\n    next();\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  watch: {\n    currentUser: function () {\n      this.fetchTweets(Number(this.userId));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/main.scss\";\n\n.tweets-wrapper {\n  max-width: 600px;\n  max-height: 300px;\n  overflow: scroll;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAllTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAllTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAllTweets.vue?vue&type=template&id=053f7c75&scoped=true&\"\nimport script from \"./UserAllTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAllTweets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserAllTweets.vue?vue&type=style&index=0&id=053f7c75&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"053f7c75\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tweet-container\"},[_c('div',{staticClass:\"tweet\"},[_c('div',{staticClass:\"tweet__user-avatar\",class:{ pointer: !_vm.isAdmin },style:({ backgroundImage: 'url(' + _vm.tweet.avatar + ')' }),on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toUserProfilePage(_vm.tweet.tweetUserId)}}}),_c('div',{staticClass:\"tweet__info-container\"},[_c('div',{staticClass:\"info\"},[_c('span',{staticClass:\"name\",class:{ pointer: !_vm.isAdmin },on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toUserProfilePage(_vm.tweet.tweetUserId)}}},[_vm._v(_vm._s(_vm.tweet.tweetUserName))]),_c('span',{staticClass:\"account\",class:{ pointer: !_vm.isAdmin },on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toUserProfilePage(_vm.tweet.tweetUserId)}}},[_vm._v(_vm._s(_vm.tweet.tweetUserAccount)+\"・\"+_vm._s(_vm._f(\"fromNow\")(_vm.tweet.createdAt)))]),_c('div',{staticClass:\"content\",class:{ pointer: !_vm.isAdmin },on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toTweetPage(_vm.tweet.TweetId)}}},[_c('p',[_vm._v(_vm._s(_vm.tweet.description))])]),(_vm.isAdmin)?_c('div',{staticClass:\"content\",class:{ 'admin-width': _vm.isAdmin }},[_c('p',[_vm._v(_vm._s(_vm._f(\"descriptionOverflow\")(_vm.tweet.description)))])]):_vm._e()]),(!_vm.isAdmin)?_c('div',{staticClass:\"tweet__footer\"},[_c('div',{staticClass:\"tweet__footer__actives\"},[_c('div',{staticClass:\"tweet__footer__actives__reply\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleReplyClicked(_vm.tweet.TweetId)}}},[_c('svg',{staticClass:\"actives-icon actives-icon__reply\",attrs:{\"width\":\"12\",\"height\":\"12\",\"viewBox\":\"0 0 21 20\",\"fill\":\"#657786\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M12.8461 0.241934L8.69812 0.231934H8.69612C4.32212 0.231934 0.896118 3.65893 0.896118 8.03393C0.896118 12.1319 4.08212 15.2399 8.36112 15.4039V19.2319C8.36112 19.3399 8.40512 19.5179 8.48112 19.6349C8.62312 19.8599 8.86512 19.9819 9.11312 19.9819C9.25112 19.9819 9.39012 19.9439 9.51512 19.8639C9.77912 19.6959 15.9881 15.7239 17.6031 14.3579C19.5051 12.7479 20.6431 10.3879 20.6461 8.04593V8.02893C20.6401 3.66193 17.2161 0.241933 12.8461 0.240933V0.241934ZM16.6331 13.2139C15.4991 14.1739 11.7711 16.6189 9.86112 17.8569V14.6699C9.86112 14.2559 9.52612 13.9199 9.11112 13.9199H8.71512C5.05512 13.9199 2.39712 11.4439 2.39712 8.03393C2.39712 4.49993 5.16512 1.73193 8.69712 1.73193L12.8441 1.74193H12.8461C16.3781 1.74193 19.1461 4.50793 19.1481 8.03793C19.1451 9.94793 18.2061 11.8819 16.6341 13.2139H16.6331Z\"}})]),_c('span',{staticClass:\"tweet__footer__actives__count\"},[_vm._v(_vm._s(_vm.tweet.repliedCount))])]),(_vm.tweet.liked)?_c('div',{staticClass:\"tweet__footer__actives__like\",on:{\"click\":function($event){return _vm.deleteLike(_vm.tweet.TweetId)}}},[_c('svg',{staticClass:\"actives-icon actives-icon__like\",attrs:{\"width\":\"12.5\",\"height\":\"11.8\",\"viewBox\":\"0 0 22 20\",\"fill\":\"#E0245E\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M11 19.6381H10.986C8.40295 19.5901 0.949951 12.8561 0.949951 6.47812C0.949951 3.41412 3.47495 0.724121 6.35295 0.724121C8.64295 0.724121 10.183 2.30412 10.999 3.45412C11.813 2.30612 13.353 0.724121 15.644 0.724121C18.524 0.724121 21.048 3.41412 21.048 6.47912C21.048 12.8551 13.594 19.5891 11.011 19.6361H11V19.6381Z\"}})]),_c('span',{staticClass:\"tweet__footer__actives__count liked\"},[_vm._v(_vm._s(_vm.tweet.likeCount))])]):_c('div',{staticClass:\"tweet__footer__actives__like\",on:{\"click\":function($event){return _vm.addLike(_vm.tweet.TweetId)}}},[_c('svg',{staticClass:\"actives-icon actives-icon__unlike\",attrs:{\"width\":\"12.5\",\"height\":\"11.8\",\"viewBox\":\"0 0 21 20\",\"fill\":\"#657786\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M10.8 19.6379H10.786C8.203 19.5899 0.75 12.8559 0.75 6.47788C0.75 3.41388 3.275 0.723877 6.153 0.723877C8.443 0.723877 9.983 2.30388 10.799 3.45388C11.613 2.30588 13.153 0.723877 15.444 0.723877C18.324 0.723877 20.848 3.41388 20.848 6.47888C20.848 12.8549 13.394 19.5889 10.811 19.6359H10.8V19.6379ZM6.154 2.22488C4.074 2.22488 2.251 4.21288 2.251 6.47988C2.251 12.2199 9.285 18.0759 10.801 18.1379C12.319 18.0759 19.351 12.2209 19.351 6.47988C19.351 4.21288 17.528 2.22488 15.448 2.22488C12.92 2.22488 11.508 5.16088 11.496 5.18988C11.266 5.75188 10.34 5.75188 10.109 5.18988C10.095 5.15988 8.684 2.22488 6.155 2.22488H6.154Z\"}})]),_c('span',{staticClass:\"tweet__footer__actives__count\",class:{ liked: _vm.tweet.liked }},[_vm._v(_vm._s(_vm.tweet.likeCount))])])])]):_vm._e(),(_vm.isAdmin)?_c('div',{staticClass:\"delete\"},[_c('div',{staticClass:\"delete-icon-container\",on:{\"click\":function($event){return _vm.handleDeleteClicked(_vm.tweet.TweetId)}}},[_c('svg',{staticClass:\"close-icon\",attrs:{\"width\":\"15\",\"height\":\"15\",\"viewBox\":\"0 0 16 16\",\"fill\":\"#657786\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M9.41412 7.99988L15.2071 2.20687C15.5971 1.81687 15.5971 1.18388 15.2071 0.792875C14.8171 0.401875 14.1841 0.402875 13.7931 0.792875L8.00012 6.58588L2.20712 0.792875C1.81712 0.402875 1.18412 0.402875 0.793119 0.792875C0.402119 1.18288 0.403119 1.81587 0.793119 2.20687L6.58612 7.99988L0.793119 13.7929C0.403119 14.1829 0.403119 14.8159 0.793119 15.2069C0.988119 15.4019 1.24312 15.4999 1.50012 15.4999C1.75712 15.4999 2.01212 15.4019 2.20712 15.2069L8.00012 9.41387L13.7931 15.2069C13.9881 15.4019 14.2431 15.4999 14.5001 15.4999C14.7571 15.4999 15.0121 15.4019 15.2071 15.2069C15.5971 14.8169 15.5971 14.1839 15.2071 13.7929L9.41412 7.99988Z\"}})])])]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tweet-container\">\n    <div class=\"tweet\">\n      <!-- TODO: import user avatar -->\n      <div\n        class=\"tweet__user-avatar\"\n        :style=\"{ backgroundImage: 'url(' + tweet.avatar + ')' }\"\n        :class=\"{ pointer: !isAdmin }\"\n        @click.stop.prevent=\"toUserProfilePage(tweet.tweetUserId)\"\n      ></div>\n      <div class=\"tweet__info-container\">\n        <div class=\"info\">\n          <span\n            class=\"name\"\n            :class=\"{ pointer: !isAdmin }\"\n            @click.stop.prevent=\"toUserProfilePage(tweet.tweetUserId)\"\n            >{{ tweet.tweetUserName }}</span\n          >\n          <span\n            class=\"account\"\n            :class=\"{ pointer: !isAdmin }\"\n            @click.stop.prevent=\"toUserProfilePage(tweet.tweetUserId)\"\n            >{{ tweet.tweetUserAccount }}・{{ tweet.createdAt | fromNow }}</span\n          >\n          <div class=\"content\" :class=\"{ pointer: !isAdmin }\" @click.stop.prevent=\"toTweetPage(tweet.TweetId)\">\n            <p>{{ tweet.description }}</p>\n          </div>\n          <div\n            v-if=\"isAdmin\"\n            class=\"content\"\n            :class=\"{ 'admin-width': isAdmin }\"\n          >\n            <p>{{ tweet.description | descriptionOverflow }}</p>\n          </div>\n        </div>\n        <div v-if=\"!isAdmin\" class=\"tweet__footer\">\n          <div class=\"tweet__footer__actives\">\n            <div\n              class=\"tweet__footer__actives__reply\"\n              @click.stop.prevent=\"handleReplyClicked(tweet.TweetId)\"\n            >\n              <svg\n                class=\"actives-icon actives-icon__reply\"\n                width=\"12\"\n                height=\"12\"\n                viewBox=\"0 0 21 20\"\n                fill=\"#657786\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M12.8461 0.241934L8.69812 0.231934H8.69612C4.32212 0.231934 0.896118 3.65893 0.896118 8.03393C0.896118 12.1319 4.08212 15.2399 8.36112 15.4039V19.2319C8.36112 19.3399 8.40512 19.5179 8.48112 19.6349C8.62312 19.8599 8.86512 19.9819 9.11312 19.9819C9.25112 19.9819 9.39012 19.9439 9.51512 19.8639C9.77912 19.6959 15.9881 15.7239 17.6031 14.3579C19.5051 12.7479 20.6431 10.3879 20.6461 8.04593V8.02893C20.6401 3.66193 17.2161 0.241933 12.8461 0.240933V0.241934ZM16.6331 13.2139C15.4991 14.1739 11.7711 16.6189 9.86112 17.8569V14.6699C9.86112 14.2559 9.52612 13.9199 9.11112 13.9199H8.71512C5.05512 13.9199 2.39712 11.4439 2.39712 8.03393C2.39712 4.49993 5.16512 1.73193 8.69712 1.73193L12.8441 1.74193H12.8461C16.3781 1.74193 19.1461 4.50793 19.1481 8.03793C19.1451 9.94793 18.2061 11.8819 16.6341 13.2139H16.6331Z\"\n                />\n              </svg>\n              <span class=\"tweet__footer__actives__count\">{{\n                tweet.repliedCount\n              }}</span>\n            </div>\n            <div\n              v-if=\"tweet.liked\"\n              @click=\"deleteLike(tweet.TweetId)\"\n              class=\"tweet__footer__actives__like\"\n            >\n              <svg\n                class=\"actives-icon actives-icon__like\"\n                width=\"12.5\"\n                height=\"11.8\"\n                viewBox=\"0 0 22 20\"\n                fill=\"#E0245E\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M11 19.6381H10.986C8.40295 19.5901 0.949951 12.8561 0.949951 6.47812C0.949951 3.41412 3.47495 0.724121 6.35295 0.724121C8.64295 0.724121 10.183 2.30412 10.999 3.45412C11.813 2.30612 13.353 0.724121 15.644 0.724121C18.524 0.724121 21.048 3.41412 21.048 6.47912C21.048 12.8551 13.594 19.5891 11.011 19.6361H11V19.6381Z\"\n                />\n              </svg>\n              <span class=\"tweet__footer__actives__count liked\">{{\n                tweet.likeCount\n              }}</span>\n            </div>\n            <div\n              v-else\n              @click=\"addLike(tweet.TweetId)\"\n              class=\"tweet__footer__actives__like\"\n            >\n              <svg\n                class=\"actives-icon actives-icon__unlike\"\n                width=\"12.5\"\n                height=\"11.8\"\n                viewBox=\"0 0 21 20\"\n                fill=\"#657786\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M10.8 19.6379H10.786C8.203 19.5899 0.75 12.8559 0.75 6.47788C0.75 3.41388 3.275 0.723877 6.153 0.723877C8.443 0.723877 9.983 2.30388 10.799 3.45388C11.613 2.30588 13.153 0.723877 15.444 0.723877C18.324 0.723877 20.848 3.41388 20.848 6.47888C20.848 12.8549 13.394 19.5889 10.811 19.6359H10.8V19.6379ZM6.154 2.22488C4.074 2.22488 2.251 4.21288 2.251 6.47988C2.251 12.2199 9.285 18.0759 10.801 18.1379C12.319 18.0759 19.351 12.2209 19.351 6.47988C19.351 4.21288 17.528 2.22488 15.448 2.22488C12.92 2.22488 11.508 5.16088 11.496 5.18988C11.266 5.75188 10.34 5.75188 10.109 5.18988C10.095 5.15988 8.684 2.22488 6.155 2.22488H6.154Z\"\n                />\n              </svg>\n              <span\n                class=\"tweet__footer__actives__count\"\n                :class=\"{ liked: tweet.liked }\"\n                >{{ tweet.likeCount }}</span\n              >\n            </div>\n          </div>\n        </div>\n        <div v-if=\"isAdmin\" class=\"delete\">\n          <div\n            @click=\"handleDeleteClicked(tweet.TweetId)\"\n            class=\"delete-icon-container\"\n          >\n            <svg\n              class=\"close-icon\"\n              width=\"15\"\n              height=\"15\"\n              viewBox=\"0 0 16 16\"\n              fill=\"#657786\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M9.41412 7.99988L15.2071 2.20687C15.5971 1.81687 15.5971 1.18388 15.2071 0.792875C14.8171 0.401875 14.1841 0.402875 13.7931 0.792875L8.00012 6.58588L2.20712 0.792875C1.81712 0.402875 1.18412 0.402875 0.793119 0.792875C0.402119 1.18288 0.403119 1.81587 0.793119 2.20687L6.58612 7.99988L0.793119 13.7929C0.403119 14.1829 0.403119 14.8159 0.793119 15.2069C0.988119 15.4019 1.24312 15.4999 1.50012 15.4999C1.75712 15.4999 2.01212 15.4019 2.20712 15.2069L8.00012 9.41387L13.7931 15.2069C13.9881 15.4019 14.2431 15.4999 14.5001 15.4999C14.7571 15.4999 15.0121 15.4019 15.2071 15.2069C15.5971 14.8169 15.5971 14.1839 15.2071 13.7929L9.41412 7.99988Z\"\n              />\n            </svg>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  fromNowFilter,\n  Toastification,\n  descriptionOverflow,\n} from \"../utils/mixin\";\nimport tweetsAPI from \"./../apis/tweets\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  props: {\n    initTweetData: {\n      type: Object,\n      require: true,\n    },\n  },\n  data() {\n    return {\n      tweet: {},\n      isUserPage: true,\n      isLike: false,\n    };\n  },\n  computed: {\n    ...mapState([\"isAdmin\"]),\n  },\n  methods: {\n    fetchTweet() {\n      this.tweet = this.initTweetData;\n    },\n    async addLike(tweetId) {\n      try {\n        const response = await tweetsAPI.addLike(tweetId);\n        if (response.data.status !== \"success\") {\n          throw new Error(response.message);\n        }\n        this.tweet.liked = true;\n        this.tweet.likeCount += 1;\n      } catch (error) {\n        this.ToastError({\n          title: \"無法讚好推文，請稍後再試\",\n        });\n      }\n    },\n    async deleteLike(tweetId) {\n      try {\n        const response = await tweetsAPI.deleteLike(tweetId);\n        if (response.data.status !== \"success\") {\n          throw new Error(response.message);\n        }\n        this.tweet.liked = false;\n        this.tweet.likeCount -= 1;\n      } catch (error) {\n        this.ToastError({\n          title: \"無法取消讚好推文，請稍後再試\",\n        });\n      }\n    },\n    handleReplyClicked(tweetId) {\n      this.$emit(\"after-reply-clicked\", tweetId);\n    },\n    handleDeleteClicked(tweetId) {\n      let result = confirm(`確定要刪除TweetId為：${tweetId} 此篇推文？`);\n      if (result) {\n        this.$emit(\"after-delete-clicked\", tweetId);\n      } else {\n        // TODO: confirm this message\n        alert(\"你按了取消按鈕\");\n      }\n    },\n    toUserProfilePage(userId) {\n      if (this.isAdmin) return;\n\n      this.$router.push({\n        name: \"user-all-tweets\",\n        params: { user_id: userId },\n      });\n    },\n    toTweetPage(tweetId) {\n      if (this.isAdmin) return;\n      this.$router.push({\n        name: \"user-tweet\",\n        params: { tweet_id: tweetId },\n      });\n    },\n  },\n  created() {\n    this.fetchTweet();\n  },\n  watch: {\n    initTweetData() {\n      this.fetchTweet();\n    },\n  },\n  mixins: [fromNowFilter, Toastification, descriptionOverflow],\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/main.scss\";\ndiv.tweet {\n  position: relative;\n  display: flex;\n  padding: 12px 15px;\n  text-align: left;\n  color: $text-main;\n  font-size: 15px;\n  border-bottom: 1px solid $border;\n  span.name {\n    margin-right: 5px;\n    font-weight: 700;\n  }\n  &__user-avatar {\n    border-radius: 50%;\n    min-width: 50px;\n    min-height: 50px;\n    max-width: 50px;\n    max-height: 50px;\n    background-color: $empty-img;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: 50%;\n  }\n  &__info-container {\n    padding-left: 15px;\n    div.content {\n      max-width: 510px;\n      &.admin-width {\n        width: 70%;\n      }\n      p {\n        word-break: break-all;\n      }\n    }\n    div.tweet__footer__actives {\n      display: flex;\n      svg.actives-icon {\n        margin-right: 11px;\n        &__like {\n          margin-right: 3.5px;\n        }\n      }\n      span {\n        color: $text-sub;\n        &.liked {\n          color: #e0245e;\n        }\n      }\n      &__reply {\n        margin-right: 51px;\n        &:hover {\n          span {\n            color: $brand-orange;\n          }\n          svg.actives-icon {\n            fill: $brand-orange;\n            stroke: $brand-orange;\n          }\n        }\n      }\n      &__like {\n        &:hover {\n          span {\n            color: #e0245e;\n          }\n          svg.actives-icon {\n            stroke: #e0245e;\n          }\n        }\n      }\n    }\n    div.delete {\n      position: absolute;\n      top: 11px;\n      right: 19px;\n      svg:hover {\n        fill: $brand-orange;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetsList.vue?vue&type=template&id=16586808&scoped=true&\"\nimport script from \"./TweetsList.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TweetsList.vue?vue&type=style&index=0&id=16586808&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16586808\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserAllTweets.vue?vue&type=style&index=0&id=053f7c75&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetsList.vue?vue&type=style&index=0&id=16586808&lang=scss&scoped=true&\""],"sourceRoot":""}