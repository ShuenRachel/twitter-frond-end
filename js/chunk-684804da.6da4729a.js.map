{"version":3,"sources":["webpack:///./src/views/UserFollowers.vue?9439","webpack:///src/views/UserFollowers.vue","webpack:///./src/views/UserFollowers.vue?aa48","webpack:///./src/views/UserFollowers.vue","webpack:///./src/components/FollowList.vue?fb25","webpack:///src/components/FollowList.vue","webpack:///./src/components/FollowList.vue?7f85","webpack:///./src/components/FollowList.vue","webpack:///./src/components/FollowList.vue?f00d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","user","key","followerId","attrs","on","afterFollowChange","_v","_e","staticRenderFns","mixins","components","NavTabs","FollowList","data","followersData","isEmptyData","methods","fetchFollowers","id","usersAPI","response","title","$emit","created","user_id","beforeRouteUpdate","to","from","next","component","style","backgroundImage","avatar","$event","stopPropagation","preventDefault","toUserProfilePage","_s","name","account","introduction","isProcessing","currentUser","deleteFollowing","addFollowing","props","initUser","type","computed","mapState","fetchUser","followingId","userId","isAdmin","$router","push","params"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,UAAU,CAACE,YAAY,kBAAkB,CAACF,EAAG,YAAY,GAAGA,EAAG,UAAU,CAACE,YAAY,eAAe,CAACN,EAAIO,GAAIP,EAAiB,eAAE,SAASQ,GAAM,OAAOJ,EAAG,aAAa,CAACK,IAAID,EAAKE,WAAWC,MAAM,CAAC,YAAYH,GAAMI,GAAG,CAAC,sBAAsBZ,EAAIa,wBAAwBb,EAAe,YAAEI,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIc,GAAG,aAAad,EAAIe,MAAM,MAChfC,EAAkB,G,kFCsBP,GACbC,OAAQA,CAACA,QACTC,WAAYA,CACVC,QAAJA,OACIC,WAAJA,QAEEC,KANF,WAOI,MAAO,CACLC,cAAeA,GACfC,aAAaA,IAGjBC,QAASA,CACPC,eADJ,SACAC,GAAA,uLAEAC,uBAFA,UAEAC,EAFA,OAIAA,oBAJA,sBAKA,qBALA,OAOA,uBACA,sCARA,qDAUA,cACAC,4BAXA,6DAeIhB,kBAhBJ,WAiBMZ,KAAK6B,MAAM,yBAGfC,QAhCF,WAiCI,IAAJ,6BACI9B,KAAKwB,eAAeO,IAEtBC,kBApCF,SAoCAC,EAAAC,EAAAC,GACI,IAAJ,mBACInC,KAAKwB,eAAeO,GACpBI,MC9DmV,I,YCOnVC,EAAY,eACd,EACAtC,EACAiB,GACA,EACA,KACA,KACA,MAIa,aAAAqB,E,6CClBf,IAAItC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,6BAA6BgC,MAAM,CAAGC,gBAAiB,OAASvC,EAAIQ,KAAKgC,OAAS,KAAO5B,GAAG,CAAC,MAAQ,SAAS6B,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwB3C,EAAI4C,kBAAkB5C,EAAIQ,KAAKkB,UAAUtB,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,OAAO,CAACE,YAAY,eAAeM,GAAG,CAAC,MAAQ,SAAS6B,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwB3C,EAAI4C,kBAAkB5C,EAAIQ,KAAKkB,OAAO,CAAC1B,EAAIc,GAAGd,EAAI6C,GAAG7C,EAAIQ,KAAKsC,SAAS1C,EAAG,OAAO,CAACE,YAAY,kBAAkBM,GAAG,CAAC,MAAQ,SAAS6B,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwB3C,EAAI4C,kBAAkB5C,EAAIQ,KAAKkB,OAAO,CAAC1B,EAAIc,GAAGd,EAAI6C,GAAG7C,EAAIQ,KAAKuC,YAAY3C,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,IAAI,CAACJ,EAAIc,GAAG,IAAId,EAAI6C,GAAG7C,EAAIQ,KAAKwC,cAAc,WAAW5C,EAAG,MAAM,CAACE,YAAY,eAAe,CAAEN,EAAIQ,KAAgB,YAAEJ,EAAG,SAAS,CAACE,YAAY,YAAYK,MAAM,CAAC,SAAWX,EAAIiD,cAAgBjD,EAAIQ,KAAKkB,KAAO1B,EAAIkD,YAAYxB,IAAId,GAAG,CAAC,MAAQ,SAAS6B,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwB3C,EAAImD,gBAAgBnD,EAAIQ,KAAKkB,OAAO,CAAC1B,EAAIc,GAAG,YAAYV,EAAG,SAAS,CAACE,YAAY,SAASK,MAAM,CAAC,SAAWX,EAAIiD,cAAgBjD,EAAIQ,KAAKkB,KAAO1B,EAAIkD,YAAYxB,IAAId,GAAG,CAAC,MAAQ,SAAS6B,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwB3C,EAAIoD,aAAapD,EAAIQ,KAAKkB,OAAO,CAAC1B,EAAIc,GAAG,mBACphDE,EAAkB,G,kFC+CP,GACbC,OAAQA,CAACA,QACToC,MAAOA,CACLC,SAAUA,CACRC,KAAMA,SAGVlC,KAPF,WAQI,MAAO,CACLb,KAAMA,GACNyC,cAAcA,IAGlBO,SAAUA,kBACZC,iCAEEjC,QAASA,CACPkC,UADJ,WAEUzD,KAAKqD,SAAS5C,YAChBT,KAAKO,KAAOP,KAAKqD,SACjBrD,KAAKO,KAAKkB,GAAKzB,KAAKqD,SAAS5C,YACrC,4BACQT,KAAKO,KAAOP,KAAKqD,SACjBrD,KAAKO,KAAKkB,GAAKzB,KAAKqD,SAASK,cAIjCP,aAXJ,SAWAQ,GAAA,qKACA,kBADA,kBAGAjC,uBAHA,UAGAC,EAHA,OAKAA,oBALA,sBAMA,qBANA,OASA,sBACA,kBACA,+BAXA,qDAaA,cACAC,uBAEA,kBAhBA,6DAmBIsB,gBA9BJ,SA8BAS,GAAA,qKACA,kBADA,kBAGAjC,0BAHA,UAGAC,EAHA,OAKAA,oBALA,sBAMA,qBANA,OASA,sBACA,kBACA,+BAXA,qDAaA,cACAC,yBAEA,kBAhBA,6DAmBIe,kBAjDJ,SAiDAgB,GACU3D,KAAK4D,SAET5D,KAAK6D,QAAQC,KAAK,CAChBjB,KAAMA,kBACNkB,OAAQA,CAAhBhC,eAIED,QA1EF,WA2EI9B,KAAKyD,cC3H2U,I,wBCQhVrB,EAAY,eACd,EACAtC,EACAiB,GACA,EACA,KACA,WACA,MAIa,OAAAqB,E,2CCnBf,W","file":"js/chunk-684804da.6da4729a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-follower-container\"},[_c('section',{staticClass:\"follow-nav-tab\"},[_c('NavTabs')],1),_c('section',{staticClass:\"follow-list\"},[_vm._l((_vm.followersData),function(user){return _c('FollowList',{key:user.followerId,attrs:{\"init-user\":user},on:{\"after-follow-change\":_vm.afterFollowChange}})}),(_vm.isEmptyData)?_c('div',{staticClass:\"empty-data\"},[_vm._v(\"目前尚無跟隨者\")]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-follower-container\">\n    <section class=\"follow-nav-tab\">\n      <NavTabs />\n    </section>\n    <section class=\"follow-list\">\n      <FollowList\n        v-for=\"user in followersData\"\n        :key=\"user.followerId\"\n        :init-user=\"user\"\n        @after-follow-change=\"afterFollowChange\"\n      />\n      <div class=\"empty-data\" v-if=\"isEmptyData\">目前尚無跟隨者</div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport NavTabs from \"../components/NavTabs\";\nimport FollowList from \"../components/FollowList.vue\";\nimport usersAPI from \"./../apis/users\";\nimport { Toastification } from \"./../utils/mixin\";\n\nexport default {\n  mixins: [Toastification],\n  components: {\n    NavTabs,\n    FollowList,\n  },\n  data() {\n    return {\n      followersData: [],\n      isEmptyData: false,\n    };\n  },\n  methods: {\n    async fetchFollowers(id) {\n      try {\n        const response = await usersAPI.getFollowers(id);\n\n        if (response.statusText !== \"OK\") {\n          throw new Error(response.message);\n        }\n        this.followersData = response.data;\n        this.isEmptyData = !this.followersData.length;\n      } catch (error) {\n        this.ToastError({\n          title: \"無法取得用戶追隨者清單，請稍後再試\",\n        });\n      }\n    },\n    afterFollowChange() {\n      this.$emit(\"after-follow-change\");\n    },\n  },\n  created() {\n    const { user_id } = this.$route.params;\n    this.fetchFollowers(user_id);\n  },\n  beforeRouteUpdate(to, from, next) {\n    const user_id = to.params.user_id;\n    this.fetchFollowers(user_id);\n    next();\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollowers.vue?vue&type=template&id=23641fdc&\"\nimport script from \"./UserFollowers.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollowers.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"follow-list\"},[_c('div',{staticClass:\"tweet\"},[_c('div',{staticClass:\"avatar-container\"},[_c('div',{staticClass:\"tweet__user-avatar pointer\",style:({ backgroundImage: 'url(' + _vm.user.avatar + ')' }),on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toUserProfilePage(_vm.user.id)}}})]),_c('div',{staticClass:\"tweet__info-container\"},[_c('div',{staticClass:\"info\"},[_c('span',{staticClass:\"name pointer\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toUserProfilePage(_vm.user.id)}}},[_vm._v(_vm._s(_vm.user.name))]),_c('span',{staticClass:\"account pointer\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toUserProfilePage(_vm.user.id)}}},[_vm._v(_vm._s(_vm.user.account))]),_c('div',{staticClass:\"content\"},[_c('p',[_vm._v(\" \"+_vm._s(_vm.user.introduction)+\" \")])])]),_c('div',{staticClass:\"follow-ship\"},[(_vm.user.isFollowing)?_c('button',{staticClass:\"following\",attrs:{\"disabled\":_vm.isProcessing || _vm.user.id === _vm.currentUser.id},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteFollowing(_vm.user.id)}}},[_vm._v(\" 正在跟隨 \")]):_c('button',{staticClass:\"follow\",attrs:{\"disabled\":_vm.isProcessing || _vm.user.id === _vm.currentUser.id},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFollowing(_vm.user.id)}}},[_vm._v(\" 跟隨 \")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"follow-list\">\n    <div class=\"tweet\">\n      <div class=\"avatar-container\">\n        <div\n          class=\"tweet__user-avatar pointer\"\n          :style=\"{ backgroundImage: 'url(' + user.avatar + ')' }\"\n          @click.stop.prevent=\"toUserProfilePage(user.id)\"\n        ></div>\n      </div>\n      <div class=\"tweet__info-container\">\n        <div class=\"info\">\n          <span class=\"name pointer\" @click.stop.prevent=\"toUserProfilePage(user.id)\">{{ user.name }}</span>\n          <span class=\"account pointer\" @click.stop.prevent=\"toUserProfilePage(user.id)\">{{ user.account }}</span>\n          <div class=\"content\">\n            <p>\n              {{ user.introduction }}\n            </p>\n          </div>\n        </div>\n        <div class=\"follow-ship\">\n          <button\n            v-if=\"user.isFollowing\"\n            class=\"following\"\n            :disabled=\"isProcessing || user.id === currentUser.id\"\n            @click.stop.prevent=\"deleteFollowing(user.id)\"\n          >\n            正在跟隨\n          </button>\n          <button\n            v-else\n            class=\"follow\"\n            :disabled=\"isProcessing || user.id === currentUser.id\"\n            @click.stop.prevent=\"addFollowing(user.id)\"\n          >\n            跟隨\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport usersAPI from \"./../apis/users\";\nimport { Toastification } from \"./../utils/mixin\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  mixins: [Toastification],\n  props: {\n    initUser: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      user: {},\n      isProcessing: false,\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\"]),\n  },\n  methods: {\n    fetchUser() {\n      if (this.initUser.followerId) {\n        this.user = this.initUser;\n        this.user.id = this.initUser.followerId;\n      } else if (this.initUser.followingId) {\n        this.user = this.initUser;\n        this.user.id = this.initUser.followingId;\n      }\n      return;\n    },\n    async addFollowing(userId) {\n      this.isProcessing = true;\n      try {\n        const response = await usersAPI.addFollowing(userId);\n\n        if (response.statusText !== \"OK\") {\n          throw new Error(response.message);\n        }\n\n        this.user.isFollowing = true;\n        this.isProcessing = false;\n        this.$emit(\"after-follow-change\");\n      } catch (error) {\n        this.ToastError({\n          title: \"無法追隨用戶，請稍後再試\",\n        });\n        this.isProcessing = false;\n      }\n    },\n    async deleteFollowing(userId) {\n      this.isProcessing = true;\n      try {\n        const response = await usersAPI.deleteFollowing(userId);\n\n        if (response.statusText !== \"OK\") {\n          throw new Error(response.message);\n        }\n\n        this.user.isFollowing = false;\n        this.isProcessing = false;\n        this.$emit(\"after-follow-change\");\n      } catch (error) {\n        this.ToastError({\n          title: \"無法取消追隨用戶，請稍後再試\",\n        });\n        this.isProcessing = false;\n      }\n    },\n    toUserProfilePage(userId) {\n      if (this.isAdmin) return;\n\n      this.$router.push({\n        name: \"user-all-tweets\",\n        params: { user_id: userId },\n      });\n    },\n  },\n  created() {\n    this.fetchUser();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/main.scss\";\ndiv.tweet {\n  position: relative;\n  display: flex;\n  padding: 10px 15px;\n  text-align: left;\n  color: $text-main;\n  font-size: 15px;\n  border-bottom: 1px solid $border;\n  span.name {\n    font-weight: 700;\n  }\n  &__user-avatar {\n    border-radius: 50%;\n    min-width: 50px;\n    min-height: 50px;\n    max-width: 50px;\n    max-height: 50px;\n    background-color: $empty-img;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: 50%;\n  }\n  &__info-container {\n    padding-left: 10px;\n    max-width: 575px;\n    .info {\n      display: flex;\n      flex-direction: column;\n    }\n    .follow-ship {\n      position: absolute;\n      top: 10px;\n      right: 15px;\n      button.following,\n      button.follow {\n        border-radius: 100px;\n      }\n      button.following {\n        width: 90px;\n        height: 25px;\n        background-color: $brand-orange;\n        color: #fff;\n        font-weight: 700;\n      }\n      button.follow {\n        width: 62px;\n        height: 30px;\n        color: $brand-orange;\n        font-weight: 700;\n        border: 1px solid $brand-orange;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FollowList.vue?vue&type=template&id=73f6027e&scoped=true&\"\nimport script from \"./FollowList.vue?vue&type=script&lang=js&\"\nexport * from \"./FollowList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FollowList.vue?vue&type=style&index=0&id=73f6027e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73f6027e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FollowList.vue?vue&type=style&index=0&id=73f6027e&lang=scss&scoped=true&\""],"sourceRoot":""}